{% if credentials.is_empty() %}
<div class="card">
    <p class="text-secondary">No credentials configured yet. Click "Add Credential" to get started.</p>
</div>
{% else %}
<div class="grid grid-2">
    {% for credential in credentials %}
    <div class="card" id="credential-{{ credential.id }}">
        <div class="card-header">
            <h3 class="card-title">{{ credential.name }}</h3>
            <span class="badge badge-info">
                {% if credential.auth_type == "password" %}
                <i data-lucide="key" style="width: 12px; height: 12px;"></i> Password
                {% else if credential.auth_type == "ssh_key" || credential.auth_type == "private_key" %}
                <i data-lucide="file-key" style="width: 12px; height: 12px;"></i> SSH Key
                {% else %}
                {{ credential.credential_type_display }}
                {% endif %}
            </span>
        </div>

        <p class="text-secondary">
            <strong>Username:</strong> {{ credential.username }}<br>
            {% if !credential.description.is_empty() %}
            <strong>Description:</strong> {{ credential.description }}<br>
            {% endif %}
            {% if credential.server_count > 0 %}
            <strong>Used by:</strong> {{ credential.server_count }} server(s)
            {% endif %}
        </p>

        <div class="flex gap-2 mt-2">
            <button hx-get="/credentials/{{ credential.id }}/edit"
                    hx-target="#credential-form-container"
                    hx-swap="innerHTML"
                    class="btn btn-sm btn-secondary">
                <i data-lucide="pencil" style="width: 14px; height: 14px;"></i> Edit
            </button>

            {% if credential.server_count == 0 %}
            <button hx-delete="/credentials/{{ credential.id }}"
                    hx-target="#credential-{{ credential.id }}"
                    hx-swap="outerHTML"
                    hx-confirm="Delete credential '{{ credential.name }}'?"
                    class="btn btn-sm btn-danger">
                <i data-lucide="trash-2" style="width: 14px; height: 14px;"></i> Delete
            </button>
            {% else %}
            <button disabled
                    class="btn btn-sm btn-secondary"
                    title="Cannot delete - in use by {{ credential.server_count }} server(s)">
                <i data-lucide="trash-2" style="width: 14px; height: 14px;"></i> Delete
            </button>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}
